## cjs(commonjs)

commonjs是Node中的模块规范，通过`require`以及`export`进行导入和导出。
`module.export`属于commonjs2

`commonjs`默认只能在node环境下使用，不能在浏览器中直接使用。

但得益于`webpack`可以对`cjs`模块进行解析，所以也可以在浏览器中使用。

`cjs`是动态加载，可以直接`require`一个变量，如：
```JavaScript
require(`./${a}`);
```

## esm(es module)

`esm` 是 `tc39` 对于 `ESMAScript` 的模块化规范，正因是语言层规范，**因此在 Node 及 浏览器中均会支持**。
>`tc39`是一个维护和发展 JavaScript的组织。
>
>`ESMAScript` 是`JavaScript` 的标准，`JavaScript`是基于`ESMAScript`的语言。

```javascript
// sum.js
export const sum = (a, b) => {
  return a + b;
}

// index.js
import {sum} from './sum'
```

`esm`是静态导入，所以在编译期间进行`Tree Shaking`，减少`js`体积。

同时，tc39也为动态加载模块定义了API：`import(module)`

esm是未来的趋势。目前一些CDN厂商、前端构建工具都有对`cjs`模块向`esm`模块转化的趋势，如`skypack`，`vite`等。

## umd

一种兼容`cjs`和`esm`的模块，既可以在 `node/webpack` 环境中被 `require` 引用，也可以在浏览器中直接用 CDN 被 `script.src` 引入。
```JavaScript
(function (root, factory) {
  if (typeof define === "function" && define.amd) {
    // AMD
    define(["xxx"], factory);
  } else if (typeof exports === "object") {
    // CommonJS
    module.exports = factory(require("xxx"));
  } else {
    // 全局变量
    root.returnExports = factory(root["xxx"]);
  }
})(this, function ($) {
  // ...
});
```